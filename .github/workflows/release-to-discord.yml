name: Release → Discord

on:
  release:
    types: [published, edited]

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Post NEW release to Discord
        if: github.event.action == 'published' && !github.event.release.prerelease
        uses: SethCohen/github-releases-to-discord@v1.15.1
        with:
          webhook_url: ${{ secrets.WEBHOOK_URL }}
          username: "Release Bot"
          content: "🎉 **New release:** ${{ github.event.release.tag_name }}"

      - name: Post UPDATED release to Discord
        if: github.event.action == 'edited' && !github.event.release.prerelease
        uses: SethCohen/github-releases-to-discord@v1.15.1
        with:
          webhook_url: ${{ secrets.WEBHOOK_URL }}
          username: "Release Bot"
          content: "✏️ **Release updated:** ${{ github.event.release.tag_name }}"

      - name: Pre-release published
        if: github.event.action == 'published' && github.event.release.prerelease
        uses: SethCohen/github-releases-to-discord@v1.15.1
        with:
          webhook_url: ${{ secrets.WEBHOOK_URL }}
          username: "Release Bot"
          content: "🧪 **Pre-release:** ${{ github.event.release.tag_name }}"